/* ==========================================================================
   MOBILE ENHANCEMENTS - Improved touch targets and layout
   ========================================================================== */

/* Mobile Button Improvements - Reduce oversized buttons */
@media (max-width: 767px) {
  .brutalist-button {
    padding: var(--space-2) var(--space-4);
    font-size: var(--font-size-sm);
    min-height: var(--tap-target-min);
  }

  .brutalist-button svg {
    width: 1.25rem;
    height: 1.25rem;
  }

  /* Reduce button text on mobile */
  .brutalist-button .hidden-mobile {
    display: none;
  }

  /* Compact button groups */
  .flex.gap-3 {
    gap: var(--space-2);
  }

  .flex.gap-6 {
    gap: var(--space-3);
  }

  .flex.gap-8 {
    gap: var(--space-4);
  }
}

/* Mobile Spacing Improvements */
@media (max-width: 767px) {
  /* Reduce excessive padding */
  .p-3 {
    padding: var(--space-2);
  }

  .p-6 {
    padding: var(--space-3);
  }

  /* Compact margins */
  .mb-12 {
    margin-bottom: var(--space-6);
  }

  .mb-8 {
    margin-bottom: var(--space-4);
  }

  /* Reduce heading sizes */
  .text-3xl,
  .text-5xl {
    font-size: var(--text-2xl);
  }

  .text-2xl {
    font-size: var(--text-xl);
  }

  .text-xl {
    font-size: var(--text-lg);
  }
}

/* Mobile Modal/Panel Improvements */
@media (max-width: 767px) {
  /* Full-screen modals on mobile */
  .fixed.inset-0 > div {
    max-width: 100%;
    margin: 0;
    border-radius: 0;
    max-height: 100vh;
  }

  /* Template panel mobile optimization */
  .grid.grid-cols-1.sm\\:grid-cols-2.lg\\:grid-cols-3 {
    grid-template-columns: 1fr;
    gap: var(--space-3);
  }

  /* Reduce template card padding */
  .spacing-mathematical {
    padding: var(--space-3);
  }
}

/* Mobile Navigation Improvements */
@media (max-width: 767px) {
  /* Stack navigation vertically */
  .flex.flex-col.sm\\:flex-row {
    flex-direction: column;
    align-items: stretch;
    width: 100%;
  }

  /* Full-width buttons on mobile */
  .flex-wrap {
    flex-wrap: wrap;
  }

  .flex-wrap > button {
    flex: 1 1 calc(50% - var(--space-2));
    min-width: 0;
  }
}

/* Mobile QuickAdd Improvements */
@media (max-width: 767px) {
  /* Larger touch target for input */
  input[type="text"],
  textarea {
    min-height: var(--tap-target-min);
    font-size: 16px; /* Prevent zoom on iOS */
    padding: var(--space-3);
  }

  /* QuickAdd preview adjustments */
  .absolute.top-full {
    left: -0.5rem;
    right: -0.5rem;
    max-width: 100vw;
  }
}

/* Mobile Calendar View Improvements */
@media (max-width: 767px) {
  /* Horizontal scroll for wide tables */
  .calendar-container {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Compact calendar cells */
  .calendar-cell {
    padding: var(--space-1);
    min-height: var(--tap-target-min);
  }

  /* Smaller event cards */
  .event-card {
    padding: var(--space-2);
    font-size: var(--font-size-xs);
  }
}

/* Mobile View Selector Improvements */
@media (max-width: 767px) {
  /* Compact view selector */
  .view-selector button {
    padding: var(--space-2) var(--space-3);
    font-size: var(--font-size-sm);
    min-width: var(--tap-target-min);
  }
}

/* Mobile Analytics Improvements */
@media (max-width: 767px) {
  /* Stack analytics vertically */
  .analytics-grid {
    grid-template-columns: 1fr;
  }

  /* Compact stat cards */
  .stat-card {
    padding: var(--space-3);
  }
}

/* Mobile Template Cards */
@media (max-width: 767px) {
  /* Better template card sizing */
  .template-card {
    min-height: var(--tap-target-spacious);
    padding: var(--space-4);
  }

  .template-card .text-3xl {
    font-size: 2rem;
  }

  .template-card .text-sm {
    font-size: var(--font-size-xs);
  }
}

/* Mobile Event Modal */
@media (max-width: 767px) {
  /* Full-screen modal on mobile */
  .event-modal {
    position: fixed;
    inset: 0;
    max-width: 100%;
    max-height: 100vh;
    border-radius: 0;
    overflow-y: auto;
  }

  /* Form fields stack vertically */
  .form-row {
    flex-direction: column;
    gap: var(--space-4);
  }

  /* Full-width inputs */
  .form-input,
  .form-select,
  .form-textarea {
    width: 100%;
  }

  /* Sticky action buttons at bottom */
  .modal-actions {
    position: sticky;
    bottom: 0;
    background: var(--card);
    padding: var(--space-4);
    border-top: 2px solid var(--border);
    margin: 0 calc(-1 * var(--space-4));
    padding-bottom: calc(var(--space-4) + var(--safe-area-inset-bottom));
  }
}

/* Mobile Keyboard Shortcuts Panel */
@media (max-width: 767px) {
  /* Compact shortcuts display */
  .shortcuts-grid {
    grid-template-columns: 1fr;
  }

  .shortcut-item {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-2);
  }

  /* Smaller key badges */
  .shortcut-key {
    padding: var(--space-1) var(--space-2);
    font-size: var(--font-size-xs);
  }
}

/* Mobile Search & Filter */
@media (max-width: 767px) {
  /* Stack search filters vertically */
  .filter-group {
    flex-direction: column;
    gap: var(--space-3);
  }

  /* Full-width search input */
  .search-input {
    width: 100%;
    min-width: 0;
  }

  /* Wrap filter chips */
  .filter-chips {
    flex-wrap: wrap;
    gap: var(--space-2);
  }
}

/* Mobile Agenda View */
@media (max-width: 767px) {
  /* Compact agenda items */
  .agenda-item {
    padding: var(--space-3);
    flex-direction: column;
    gap: var(--space-2);
  }

  .agenda-time {
    font-size: var(--font-size-sm);
    min-width: auto;
  }

  .agenda-content {
    width: 100%;
  }
}

/* Mobile-specific utilities */
@media (max-width: 767px) {
  /* Hide on mobile */
  .hide-mobile {
    display: none !important;
  }

  /* Show only on mobile */
  .mobile-only {
    display: block;
  }

  /* Reduce header size */
  .page-header {
    padding: var(--space-4) var(--space-3);
  }

  /* Compact ASCII dividers */
  .ascii-divider {
    font-size: 0.625rem;
    margin: var(--space-3) 0;
  }
}

/* Landscape mobile improvements */
@media (max-width: 767px) and (orientation: landscape) {
  /* Reduce vertical spacing in landscape */
  .mb-12 {
    margin-bottom: var(--space-4);
  }

  .mb-8 {
    margin-bottom: var(--space-3);
  }

  /* Compact header in landscape */
  .page-header h1 {
    font-size: var(--text-xl);
    margin-bottom: var(--space-2);
  }
}

/* Touch feedback improvements */
@media (hover: none) and (pointer: coarse) {
  /* Add touch feedback */
  button:active,
  .touchable:active {
    transform: scale(0.98);
    opacity: 0.9;
  }

  /* Remove hover states on touch devices */
  button:hover,
  .touchable:hover {
    transform: none;
  }
}

/* Small screen optimizations (< 375px) */
@media (max-width: 374px) {
  /* Extra compact for very small phones */
  .brutalist-button {
    padding: var(--space-2) var(--space-3);
    font-size: 0.75rem;
  }

  .text-base {
    font-size: 0.875rem;
  }

  /* Reduce all spacing by 25% */
  .p-4 {
    padding: var(--space-2);
  }

  .gap-4 {
    gap: var(--space-2);
  }

  .mb-6 {
    margin-bottom: var(--space-3);
  }
}

/* Accessibility improvements for mobile */
@media (max-width: 767px) {
  /* Larger focus indicators on mobile */
  *:focus-visible {
    outline-width: 3px;
    outline-offset: 3px;
  }

  /* Ensure text is readable */
  .text-xs {
    font-size: 0.875rem; /* Never smaller than 14px */
  }

  /* Better contrast for muted text */
  .text-muted-foreground {
    opacity: 0.85;
  }
}
